# public brume GQL schema
scalar Any

type User {
	id: String!
	name: String!
	avatar: String!
	projects: [Project!]!
	organization: Organization!
}

type Organization {
	id: String!
	providerId: String!
	name: String!

	cloudAccounts: [CloudAccount!]!
}

enum CloudProvider {
	AWS
	Azure
	GCP
}

enum CloudStatus {
	Pending
	Connected
	Disconnected
	Error
}

type Stack {
	template_id: String!
	id: String!
	name: String!
}

type CloudAccount {
	id: String!
	cloudProvider: CloudProvider!
	status: CloudStatus!
	name: String!

	stacks: [Stack!]!
}

type Project {
	id: String!
	name: String!
	description: String!
	isDirty: Boolean!
	services: [Service!]!
}

type Source {
	id: String!
	type: String!
	data: Any!
}

type Runner {
	id: String!
	type: String!
	link: String!
	version: String!

	schema: Any!
	data: Any!
}

type Builder {
	id: String!
	type: String!
	link: String!
	version: String!

	schema: Any!
	data: Any!
}

type BaseService {
	source: Source!
	runner: Runner!
	builder: Builder!
}

type Service {
	id: String!
	name: String!

	live: BaseService!
	draft: BaseService
}

type Query {
	# get the current user
	me: User!

	getProjectById(id: String!): Project!
	getAWSCloudFormationURL: String!
}
