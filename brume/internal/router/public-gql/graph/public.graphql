# public brume GQL schema
scalar Any

type User {
	id: String!
	name: String!
	avatar: String!
	projects: [Project!]!
	organization: Organization!
}

type Organization {
	id: String!
	providerId: String!
	name: String!
}

type Project {
	id: String!
	name: String!
	description: String!
	isDirty: Boolean!
	services: [Service!]!
}

type Source {
	type: String!
	data: Any!
}

type Runner {
	type: String!
	link: String!
	version: String!

	schema: Any!
	data: Any!
}

type Builder {
	type: String!
	link: String!
	version: String!

	schema: Any!
	data: Any!
}

type BaseService {
	source: Source!
	runner: Runner!
	builder: Builder!
}

type Service {
	id: String!
	name: String!

	live: BaseService!
	draft: BaseService

	# deployments: [Deployment!]!
}

input CreateServiceInput {
	name: String!
	image: String!
}

input ServiceSettingsInput {
	name: String!
}

type Query {
	# get the current user
	me: User!

	getProjectById(id: String!): Project!
}

type Mutation {
	createProject(name: String!, description: String): Project!
	addServiceToProject(projectId: String!, input: CreateServiceInput!): Service!
	deleteService(serviceId: String!): Service!
	updateServiceSettings(
		serviceId: String!
		input: ServiceSettingsInput!
	): Service!
	deleteDraft(projectId: String!): Project!

	deployProject(projectId: String!): Project!
}
